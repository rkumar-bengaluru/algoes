(this.webpackJsonpalgoes=this.webpackJsonpalgoes||[]).push([[15],{95:function(t,e,n){"use strict";n.r(e);var s=n(26),r=n(2),a=n(1),o=n.n(a),c=n(3),u=n(0);e.default=function(){var t=Object(a.useState)(["Hi"]),e=Object(r.a)(t,2),n=e[0],i=e[1],l=Object(a.useState)(["Hello"]),d=Object(r.a)(l,2),m=d[0],f=d[1],p=function(){var t=Object(a.useRef)(null);return[t,function(){t.current&&t.current.focus()}]},b=p(),j=Object(r.a)(b,2),v=j[0],h=j[1],N=p(),O=Object(r.a)(N,2),x=O[0],g=O[1],w=o.a.forwardRef((function(t,e){return Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-sm-4",children:t.userName}),Object(u.jsx)("div",{className:"col-sm-8",children:Object(u.jsx)(y,{ref:e,broadCastMessage:t.broadCastMessage,userName:t.userName})})]})})),y=o.a.forwardRef((function(t,e){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("input",{className:"form-control ",type:"text",placeholder:t.userName,ref:e,onKeyDown:function(e){return t.broadCastMessage(e,t.userName)}})})}));function C(t,e){if("Enter"===t.code)if(t.preventDefault(),"rupak"===e){var r=Object(s.a)(n);r.push(v.current.value),i(r),v.current.value="",g()}else if("aryan"===e){var a=Object(s.a)(m);a.push(x.current.value),f(a),x.current.value="",h()}}return Object(a.useEffect)((function(){v.current.focus()}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h6",{children:"Forwarding Refs"}),Object(u.jsx)("p",{children:"Ref forwarding is a technique for automatically passing a ref through a component to one of its children. This is typically not necessary for most components in the application. However, it can be useful for some kinds of components, especially in reusable component libraries."}),Object(u.jsx)("div",{className:"row border m-2",children:Object(u.jsx)(c.UnControlled,{value:'import React, {\tComponent,\tuseEffect,\tuseRef,\tuseState} from "react"\nimport {UnControlled as CodeMirror} from "react-codemirror2";\n\nconst ChatRoom = () => {\n\n\tconst [rupakMessages, setRupakMessages] = useState(["Hi"]);\n\tconst [aryanMessages, setAryanMessages] = useState(["Hello"]);\n\n\t// custom focus hook \n\tconst useFocus = () => {\n\t\tconst htmlElRef = useRef(null)\n\t\tconst setFocus = () => {\n\t\t\thtmlElRef.current && htmlElRef.current.focus()\n\t\t}\n\n\t\treturn [htmlElRef, setFocus]\n\t}\n\tconst [rref, setRInputFocus] = useFocus();\n\tconst [aref, setAInputFocus] = useFocus();\n\t// reusable component (ref forwarding)\n\tconst TextComponent = React.forwardRef((props, ref) => {\n\t\treturn ( <div className = "row" >\n\t\t\t<div className = "col-sm-4" > {\n\t\t\t\tprops.userName\n\t\t\t} </div> \n\t\t\t<div className="col-sm-8">\n\t\t\t<FancyTextComponent ref = {ref}\n\t\t\tbroadCastMessage = {props.broadCastMessage}\n\t\t\tuserName = {props.userName}/> </div></div>\n\t\t)\n\t});\n\t// ref forwarded from <TextComponent> is again forwarded to child\n\tconst FancyTextComponent = React.forwardRef((props, ref) => {\n\t\treturn ( <>\n\t\t\t<input className = "form-control "\n\t\t\ttype = "text"\n\t\t\tplaceholder = {\n\t\t\t\tprops.userName\n\t\t\t}\n\t\t\tref = {\n\t\t\t\tref\n\t\t\t}\n\t\t\tonKeyDown = {\n\t\t\t\t(e) => props.broadCastMessage(e, props.userName)\n\t\t\t}\n\t\t\t/> </>\n\t\t)\n\t});\n\n\tuseEffect(() => {\n\t\trref.current.focus();\n\t}, []);\n\n\tfunction broadCastMessage(event, user) {\n\t\tif (event.code === \'Enter\') {\n\t\t\tevent.preventDefault();\n\t\t\tif (user === \'rupak\') {\n\t\t\t\tconst r = [...rupakMessages];\n\t\t\t\tr.push(rref.current.value);\n\t\t\t\tsetRupakMessages(r);\n\t\t\t\trref.current.value = \'\';\n\t\t\t\tsetAInputFocus();\n\t\t\t} else if (user === \'aryan\') {\n\t\t\t\tconst t = [...aryanMessages];\n\t\t\t\tt.push(aref.current.value);\n\t\t\t\tsetAryanMessages(t);\n\t\t\t\taref.current.value = \'\';\n\t\t\t\tsetRInputFocus();\n\t\t\t}\n\t\t}\n\t}\n\n\treturn ( <>\n\t\t<div className = "row border m-2" >\n\t\t<CodeMirror value = {\n\t\t\tcode\n\t\t}\n\t\toptions = {\n\t\t\t{\n\t\t\t\tlineNumbers: true,\n\t\t\t\tmode: "javascript"\n\t\t\t}\n\t\t}\n\t\t/> </div> <div className = "row border m-2" >\n\t\t<div className = "col-sm-6 border" >\n\t\t<div className = "row" >\n\t\t<h6 > Rupak < /h6> </div> {\n\t\t\taryanMessages.map((m, i) => {\n\t\t\t\treturn <div key = {\n\t\t\t\t\ti\n\t\t\t\t}\n\t\t\t\tclassName = "row border p-2" > < span > {\n\t\t\t\t\tm\n\t\t\t\t}\n\t\t\t\tfrom aryan < /span></div >\n\t\t\t})\n\t\t} <div className = "row" >\n\t\t<TextComponent userName = "rupak"\n\t\tref = {\n\t\t\trref\n\t\t}\n\t\tbroadCastMessage = {\n\t\t\tbroadCastMessage\n\t\t}\n\t\tid = "rupak" / >\n\t\t</div> <\n\t\t/div> <\n\t\tdiv className = "col-sm-6 border" > { /* display all messages*/ } <\n\t\tdiv className = "row" >\n\t\t<h6 > Aryan < /h6> <\n\t\t/div> {\n\t\t\trupakMessages.map((m, i) => {\n\t\t\t\treturn <div key = {\n\t\t\t\t\ti\n\t\t\t\t}\n\t\t\t\tclassName = "row border p-2" > < span > {\n\t\t\t\t\tm\n\t\t\t\t}\n\t\t\t\tfrom rupak < /span></div >\n\t\t\t})\n\t\t} <\n\t\tdiv className = "row" >\n\t\t<TextComponent userName = "aryan"\n\t\tref = {\n\t\t\taref\n\t\t}\n\t\tbroadCastMessage = {\n\t\t\tbroadCastMessage\n\t\t}\n\t\tid = "aryan" / >\n\t\t</div> </div> </div> </>\n\t)\n}\nexport default ChatRoom;\n',options:{lineNumbers:!0,mode:"javascript"}})}),Object(u.jsxs)("div",{className:"row border m-2",children:[Object(u.jsxs)("div",{className:"col-sm-6 border",children:[Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("h6",{children:"Rupak"})}),m.map((function(t,e){return Object(u.jsx)("div",{className:"row border p-2",children:Object(u.jsxs)("span",{children:[t," from aryan"]})},e)})),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)(w,{userName:"rupak",ref:v,broadCastMessage:C,id:"rupak"})})]}),Object(u.jsxs)("div",{className:"col-sm-6 border",children:[Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("h6",{children:"Aryan"})}),n.map((function(t,e){return Object(u.jsx)("div",{className:"row border p-2",children:Object(u.jsxs)("span",{children:[t," from rupak"]})},e)})),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)(w,{userName:"aryan",ref:x,broadCastMessage:C,id:"aryan"})})]})]})]})}}}]);
//# sourceMappingURL=15.88f3a8b6.chunk.js.map